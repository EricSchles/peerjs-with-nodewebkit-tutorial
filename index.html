<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <meta name="author" content="laike9m">
  <title>demo</title>
  <script type="text/javascript" src="peer.js"></script>
  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
</head>
<body>
  <script>
    window.socket = io.connect('http://localhost/', { port: 12345 });
    function clickSend() {
      document.getElementById("send").addEventListener("click", function () {
        window.socket.on('connect', function () {
          socket.on('send', function (data) {
            conn.send(data);
            console.log('data sent');
            peer.disconnect();
          });
        });
        var peer = new Peer('zuoyao', {key: '45rvl4l8vjn3766r', debug: 3});
        var conn = peer.connect('lizhihua');
        conn.on('open', function () {
          console.log("connect to peer");
          window.socket.emit('send');
        });
      });
    }
    function clickRecv(){
      var peer = new Peer('lizhihua', {key: 'bid90nkby13sdcxr', debug: 3});
      peer.on('connection', function(conn) {
        conn.on('data', function(data){
          window.socket.emit('receive', data);
          console.log("received complete: ", Date());
        });
      });
    }
  </script>
  peerjs with nodewebkit demo
  <button onclick="clickSend()">send</button>
  <button onclick="clickRecv()">receive</button>
</body>
</html>